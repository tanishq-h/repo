<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="img/favicon.ico">
        <title>Main Logic Documentation - Energy Efficiency ETL Documentation</title>
        <link href="css/bootstrap.min.css" rel="stylesheet">
        <link href="css/fontawesome.min.css" rel="stylesheet">
        <link href="css/brands.min.css" rel="stylesheet">
        <link href="css/solid.min.css" rel="stylesheet">
        <link href="css/v4-font-face.min.css" rel="stylesheet">
        <link href="css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href=".">Energy Efficiency ETL Documentation</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Home</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="index.html" class="dropdown-item">Welcome to Energy Efficiency ETL Documentation</a>
</li>
                                    
<li>
    <a href="framework.html" class="dropdown-item">Framework</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Configs</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="file:///C:/EIA_TASK/my-project/docs/configs/hourly_generation_by_energy_source.md" class="dropdown-item">Hourly Generation</a>
</li>
                                    
<li>
    <a href="file:///C:/EIA_TASK/my-project/docs/configs/electricity_sales_to_customers.md" class="dropdown-item">Electricity Sales</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Fetch</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="file:///C:/EIA_TASK/my-project/docs/fetch/provider/EIA.md" class="dropdown-item">EIA</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Ingest</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="file:///C:/EIA_TASK/my-project/docs/ingest/provider/xata.md" class="dropdown-item">XATA</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item">
                                <a href="file:///C:/EIA_TASK/my-project/docs/main.md" class="nav-link">Main Logic</a>
                            </li>
                            <li class="nav-item">
                                <a href="file:///C:/EIA_TASK/my-project/docs/utils.md" class="nav-link">Utilities</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#main-logic-documentation" class="nav-link">Main Logic Documentation</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#overview" class="nav-link">Overview</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="main-logic-documentation">Main Logic Documentation</h1>
<h2 id="overview">Overview</h2>
<p>The main.py module orchestrates the entire data processing pipeline for the Energy Efficiency ETL project. It is responsible for loading configuration parameters, fetching data from specified providers, preprocessing the data, and ultimately ingesting it into the target database.</p>
<h3 id="method-run_pipelineconfig_path">Method: run_pipeline(config_path)</h3>
<p>This is the main function that coordinates the execution of the ETL process.</p>
<p>Hereâ€™s a detailed explanation of the steps involved in the <code>main.py</code> logic, along with a flow chart that illustrates the function invocation process for the Energy Efficiency ETL pipeline.</p>
<h4 id="steps-involved">Steps Involved</h4>
<ol>
<li><strong>Load Configuration Parameters</strong></li>
<li>The <code>ConfigParamsLoader</code> class is instantiated with the provided <code>config_path</code>.</li>
<li>Configuration parameters are loaded from the specified JSON file.</li>
<li>The provider name is extracted from the configuration for later use.</li>
</ol>
<p>config_loader = ConfigParamsLoader(config_path)
   provider_name = config_loader.get_provider_name()</p>
<ol>
<li><strong>Fetch Provider Parameters</strong></li>
<li>The <code>ProviderClassManager</code> class is instantiated with the same configuration path.</li>
<li>This manager retrieves the appropriate provider class based on the extracted provider name.</li>
<li>The selected provider class is then called to fetch data from the API.</li>
</ol>
<p><code>python
   provider_manager = ProviderClassManager(config_path)
   df = provider_manager.fetch_data(provider_name)</code></p>
<ol>
<li><strong>Data Preprocessing</strong></li>
<li>The <code>LoadRule</code> class is instantiated to load any preprocessing rules defined in the configuration.</li>
<li>The symbols to be replaced and the values to replace nulls with are retrieved.</li>
<li>A <code>DataPreprocessor</code> instance is created, which applies the specified rules to clean the fetched DataFrame.</li>
</ol>
<p><code>python
   rule = LoadRule(config_path)
   symbol_replacement = rule.load_symbol_replacement()
   null_value_replacement = rule.load_null_value_replacement()
   preprocessor = DataPreprocessor(symbol_replacement, null_value_replacement)
   df = preprocessor.replace_symbols(df)
   df = preprocessor.replace_null(df)</code></p>
<ol>
<li><strong>Ingest Process</strong></li>
<li>The preprocessed DataFrame is prepared for ingestion.</li>
<li>The <code>IngestClassManager</code> is used to manage the ingestion process, determining which ingester to use based on the target specified in the configuration.</li>
<li>The data is ingested into the specified database.</li>
</ol>
<p><code>python
   target = config_loader.get_target()
   ingest_manager = IngestClassManager(config_path)
   ingest_manager.ingest_data(df, target)</code></p>
<ol>
<li><strong>Completion</strong></li>
<li>The pipeline completes, and a message is printed to indicate that all processes have been executed successfully.</li>
</ol>
<h3 id="flow-chart">Flow Chart</h3>
<p>Below is a flow chart that illustrates the function invocation process for the ETL pipeline. You can visualize how each component interacts within the main pipeline.</p>
<h3 id="conclusion">Conclusion</h3>
<p>The <code>main.py</code> file serves as the backbone of the ETL process, guiding the flow from configuration loading to data ingestion. Each step is modular, allowing for easy modifications or extensions of the pipeline in the future. The detailed workflow ensures that the data is efficiently and accurately processed from source to target.</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = ".",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="js/base.js"></script>

        <div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
